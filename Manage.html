{% extends "base.html" %}
{% block title %}Manage{% endblock %}
{% block content %}
<div id="alert">
</div>

<div class="panel panel-default">
    <div class="panel-heading">Streams I Own</div>
        <div class="panel-body">
            {% if my_grouped_list %}
                <div class="col-md-2">Name</div>
                <div class="col-md-4">Last New Picture</div>
                <div class="col-md-2">Number of Pictures</div>
                <div class="col-md-2">Views</div>
                <div class="col-md-2">Delete</div>

                <form action="/deleteStream" method="post">
                {% for myStream, numViews, upadatetime, numPics in my_grouped_list %}
                    <div class="col-md-2">
                        <a href="/View_single?streamKey={{myStream.key.urlsafe()}}">
                        {{ myStream.name }}
                        </a>
                    </div>
                    <div class="col-md-4">
                        {{ upadatetime }}
                    </div>
                    <div class="col-md-2">
                        {{ numPics }}
                    </div>
                    <div class="col-md-2">
                        {{ numViews }}
                    </div>
                    <div class="col-md-2">
                        <input name="{{myStream.name}}" type="checkbox">
                    </div>
                    <br>
                {% endfor %}

                <input type="submit" value="Delete selected streams">
                </form>
            {% else %}
                You do not have any streams yet. Create some now!
                <button type="submit" onclick="location.href = '/create'">
                    Create Stream
                </button>
            {% endif %}
        </div>
      </div>
    <div class="panel panel-default">
        <div class="panel-heading">Streams I Subscribe to</div>
        <div class="panel-body">
            {% if sub_grouped_list %}
                <div class="col-md-2">Name</div>
                <div class="col-md-4">Last New Picture</div>
                <div class="col-md-2">Number of Pictures</div>
                <div class="col-md-2">Views</div>
                <div class="col-md-2">Unsubscribe</div>

                <form action="/unsubscribe" method="post">
                {% for subscribeStream, numViews, upadatetime, numPics in sub_grouped_list %}
                    <div class="col-md-2">
                        <a href="/View_single?streamKey={{subscribeStream.urlsafe()}}">
                        {{ subscribeStream.get().name }}
                        </a>
                    </div>
                    <div class="col-md-4">
                        {{ upadatetime }}
                    </div>
                    <div class="col-md-2">
                        {{ numPics }}
                    </div>
                    <div class="col-md-2">
                        {{ numViews }}
                    </div>
                    <div class="col-md-2">
                        <input name="{{subscribeStream.get().name}}" type="checkbox">
                    </div>
                    <br>
                {% endfor %}
                <input type="submit" value="Unsubscribe selected streams">
                </form>
            {% else %}
                You do not have any subscriptions yet. Subscribe to some today!
                <button type="submit" onclick="location.href = '/View_all'">
                    View all streams
                </button>
            {% endif %}
        </div>
    </div>
</div>
<div class="push"></div>
{% endblock %}
